# rest-api

Start developing by 
1. start the mongo containers 
- `sudo systemctl start docker`
- `yarn db`
2. start the server `yarn dev`

When finished run
* `sudo docker-compose -f docker-compose.yml down`


## To make a new model
* create a an interface for the model
* create a model
* make an outline for the controller which a handler will call a service, but don't fill it out yet
* create a service that will be called by the controller and interact with the model
* return to the controller and fill out the body of the handler, calling the new service
* make a new route, using the new handler but wait--, we need to validate the request before it's done
* create a schema that describes what a user requests should look like, omitting what is generated by mongoose
* in the new route, pass the new schema to validateResource as middleware
* now that we have a schema, we can make a type so that the controller knows what to expect once again, omitting what is generated by mongoose
* go back to the handler and type the request depending on params, res.body, req.body, etc
*  

#### If running into issues connecting to front end
* make a health check to the new route ex:

    `app.get('/', (req:Request, res:Response => res.send(200)))`
# src/
* app.ts - basically just the listen call

## controllers - calls a service or errors out
* UserController.ts

## interfaces - typing for models
* IUserModel.ts

## middleware - mostly validation
* validateResource.ts - Zod validation for any request

## models - mongoose model definitions
* UserModel.ts

## routes - api endpoints
* home-routes.ts - '/',
* index.ts - exports express router
  ### api
  * user-routes.ts - '/api'

## schemas - validate what the user is passing to our api
* UserSchema.ts

## services - creates a model or errors out
* UserService.ts

## utils - various utilities
* connection.ts
* logger.ts
